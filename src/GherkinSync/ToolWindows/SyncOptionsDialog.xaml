<platform:DialogWindow  x:Class="GherkinSync.ToolWindows.SyncOptionsDialog"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
                        xmlns:platform="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
                        xmlns:toolkit="clr-namespace:Community.VisualStudio.Toolkit;assembly=Community.VisualStudio.Toolkit"
                        toolkit:Themes.UseVsTheme="True"
                        mc:Ignorable="d"
                        Title="GherkinSync: Synchronization options"
                        Width="800"
                        MinHeight="600"
                        d:DesignHeight="800"
                        d:DesignWidth="800" 
                        Name="SyncOptionsDialogWindow"
                        DataContext="{Binding Mode=OneWay, RelativeSource={RelativeSource Self}}">

    <platform:DialogWindow.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </platform:DialogWindow.Resources>

    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:InvokeCommandAction Command="{Binding SyncOptions. LoadedCommand}"/>
        </b:EventTrigger>
    </b:Interaction.Triggers>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="25*" />
            <ColumnDefinition Width="25*" />
            <ColumnDefinition Width="50*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Label Content="Project" 
               Grid.Row="0" 
               Grid.Column="0" 
               Margin="5"/>
        <TextBox Name="ProjectName" 
                 Grid.ColumnSpan="3" 
                 Grid.Row="0" 
                 Grid.Column="1" 
                 Margin="5" 
                 Text="{Binding Path=SyncOptions.ProjectName, Mode=TwoWay}" />

        <Label Content="Test plan" 
               Grid.Row="1" 
               Grid.Column="0" 
               Margin="5"/>
        <TextBox Name="TestPlanId" 
                 Grid.Row="1" 
                 Grid.Column="1" 
                 Margin="5" 
                 Text="{Binding Path=SyncOptions.TestPlanId, Mode=TwoWay}" />
        <TextBox Name="TestPlanName" 
                 Grid.Row="1" 
                 Grid.Column="2" 
                 Margin="0 5 5 5" 
                 Text="{Binding Path=SyncOptions.TestPlanName, Mode=TwoWay}"/>

        <Button Name="RefreshTestPlan" 
                Width="25"
                Grid.Row="1" 
                Grid.Column="3" 
                Margin="0 5 5 5" 
                ToolTip="Refresh test plan title"
                IsEnabled="{Binding Path=SyncOptions.AreButtonsEnabled, Mode=OneWay}"
                Command="{Binding SyncOptions.RefreshTestPlanCommand}"
                >
            <Button.Background>
                <ImageBrush ImageSource="pack://application:,,,/GherkinSync;component/Resources/Refresh.png" Stretch="Uniform"/>
            </Button.Background>
        </Button>

        <Label Content="Test suite" 
               Grid.Row="2" 
               Grid.Column="0" 
               Margin="5"/>
        <TextBox Name="TestSuiteId" 
                 Grid.Row="2" 
                 Grid.Column="1" 
                 Margin="5" 
                 Text="{Binding Path=SyncOptions.TestSuiteId, Mode=TwoWay}" />
        <TextBox Name="TestSuiteName" 
                 Grid.Row="2" 
                 Grid.Column="2" 
                 Margin="0 5 5 5" 
                 Text="{Binding Path=SyncOptions.TestSuiteName, Mode=TwoWay}" />

        <Button Name="RefreshTestSuite" 
                Width="25"
                Grid.Row="2" 
                Grid.Column="3" 
                Margin="0 5 5 5" 
                ToolTip="Refresh test suite title"
                IsEnabled="{Binding Path=SyncOptions.AreButtonsEnabled, Mode=OneWay}"
                Command="{Binding SyncOptions.RefreshTestSuiteCommand}"
                >
            <Button.Background>
                <ImageBrush ImageSource="pack://application:,,,/GherkinSync;component/Resources/Refresh.png" Stretch="Uniform"/>
            </Button.Background>
        </Button>

        <Label Content="Description template" 
               Grid.Row="3" 
               Grid.Column="0" 
               Margin="5"/>
        <TextBox Name="DescriptionTemplate" 
                 Grid.ColumnSpan="3" 
                 Grid.Row="3" 
                 Grid.Column="1" 
                 Margin="5" 
                 TextWrapping="Wrap"
                 AcceptsReturn="True"
                 VerticalScrollBarVisibility="Visible"
                 Text="{Binding Path=SyncOptions.DescriptionTemplate, Mode=TwoWay}" />

        <Label Content="Custom fields" 
               Grid.Row="4" 
               Grid.Column="0" 
               Margin="5" />
        <DataGrid Name="CustomFields"
                  Grid.ColumnSpan="3" 
                  Grid.Row="4" 
                  Grid.Column="1" 
                  Height="200" 
                  Margin="5" 
                  ItemsSource="{Binding Path=SyncOptions.CustomFields, Mode=TwoWay}" 
                  AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Key" 
                                    Width="200" 
                                    Binding="{Binding FieldName}"/>
                <DataGridTextColumn Header="Value" 
                                    Width="*" 
                                    Binding="{Binding DefaultValue}" />
            </DataGrid.Columns>
        </DataGrid>

        <CheckBox Content="Add background to steps" 
                  Name="BackgroundAsSteps" 
                  Grid.Row="5" 
                  Grid.Column="1" 
                  Grid.ColumnSpan="3" 
                  Margin="5" 
                  IsChecked="{Binding Path=SyncOptions.BackgroundAsSteps, Mode=TwoWay}" />

        <CheckBox Content="Remove from suite test cases not in the feature file"
                  Name="RemoveCasesFromSuite" 
                  Grid.Row="6" 
                  Grid.Column="1" 
                  Grid.ColumnSpan="3" 
                  Margin="5" 
                  IsChecked="{Binding Path=SyncOptions.RemoveCasesFromSuite, Mode=TwoWay}" />

        <CheckBox Content="Associate test case automaton"
                  Name="AssociateAutomation" 
                  Grid.Row="7" 
                  Grid.Column="1" 
                  Grid.ColumnSpan="3" 
                  Margin="5" 
                  IsChecked="{Binding Path=SyncOptions.AssociateAutomation, Mode=TwoWay}" />

        <Label Content="Automated Test Storage" 
               Grid.Row="8" 
               Grid.Column="0" 
               Margin="5"
               Visibility="{Binding Path=SyncOptions.AssociateAutomation, Converter={StaticResource BoolToVis}}"
               />
        <TextBox Name="AutomatedTestStorage" 
                 Grid.ColumnSpan="3" 
                 Grid.Row="8" 
                 Grid.Column="1" 
                 Margin="5" 
                 Visibility="{Binding Path=SyncOptions.AssociateAutomation, Converter={StaticResource BoolToVis}}"
                 Text="{Binding Path=SyncOptions.AutomatedTestStorage, Mode=TwoWay}" />

        <StackPanel Orientation="Horizontal" 
                    Grid.ColumnSpan="3"
                    Grid.Row="9" 
                    Grid.Column="1" 
                    HorizontalAlignment="Right">
            <Button Name="OkButton" 
                    Content="Ok" 
                    Width="100" 
                    Margin="5" 
                    IsEnabled="{Binding Path=SyncOptions.AreButtonsEnabled, Mode=OneWay}"
                    Command="{Binding SyncOptions.OkCommand}"
                    CommandParameter="{Binding ElementName=SyncOptionsDialogWindow, Mode=OneWay}"
                    />
            <Button Name="CancelButton" 
                    Content="Cancel" 
                    Width="100" 
                    Margin="5" 
                    IsEnabled="{Binding Path=SyncOptions.AreButtonsEnabled, Mode=OneWay}"
                    Command="{Binding SyncOptions.CancelCommand}"
                    CommandParameter="{Binding ElementName=SyncOptionsDialogWindow, Mode=OneWay}"
                    />
        </StackPanel>
    </Grid>
</platform:DialogWindow>
